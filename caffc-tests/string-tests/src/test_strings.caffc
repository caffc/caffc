module main

test_add() {
  str a = "hello "
  str b = "world!"

  assertEqual("hello world!", a.add(b), "string concatenation should work")
}

test_slice() {
  //       012345678
  str h = "hello.exe"
  //      -987654321

  assertEqual("hello.exe", h.slice(0, 0), "a full slice should return the full string")
  assertEqual("exe", h.slice(-3, 0), "a slice can start from the end of the string using negative indexes")
  assertEqual("ello", h.slice(1, -4), "a slice can start from the left, and end at the end")
  assertEqual("ello", h.slice(1, 5), "a slice can be a regular index slice")
}

test_indexOf() {
  str h = "hello world"

  assertTrue(h.indexOf("llo") == 2, "invalid index returned by indexOf 1")
  assertTrue(h.indexOf("") == 0, "invalid index returned by indexOf 2")
  assertTrue(h.indexOf("hel") == 0, "invalid index returned by indexOf 3")
  assertTrue(h.indexOf("rld") == 8, "invalid index returned by indexOf 4")
}

test_compareTo() {
  str a = "a"  // currently you can't call functions on string constants
  str b = "b"

  assertTrue(a.compareTo(b) < 0, "compareTo error 1")
  assertTrue(b.compareTo(a) > 0, "compareTo error 2")
  assertTrue(a.compareTo(a) == 0, "compareTo error 3")
}

main() {
  test_add()
  test_slice()
  test_indexOf()
  print("all good")
}