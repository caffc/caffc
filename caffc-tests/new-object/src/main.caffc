module main

native {
#include <stdio.h>
}

class A {
  i32 index

  constructor(i32 index) {
    _this.index = index
  }

  static createA(i32 index) -> A {
    return new A(index)
  }

  hello(i32 index) {
    native {
      printf("hello world from object: %d, a is %d\n", index, _this->index);
      caffc_gc_perform();
    }

  }
}

main() {
  A a = A.createA(4)
  new A(3).hello(4)
}

