module main

class ArrayList<T> {
  T[] items
  i32 length

  constructor() {
    _this.items = new T[2]
  }

  /**
   * Add an item into the list
   */
  add(T item) {
    // if we're already at full capacity, we need to resize the array
    if _this.length >= _this.items.size() {
      T[] new_items = new T[_this.items.size() + 8] // no multiplication yet lol

      for i32 i = 0; i < _this.items.size(); i = i + 1 {
        new_items[i] = _this.items[i]
      }

      _this.items = new_items
    }

    _this.items[_this.length] = item
    _this.length = _this.length + 1
  }

  /**
   * Gets an item from the list by its index.
   */
  get(i32 index) -> T {
    return _this.items[index]
  }

  set(i32 index, T value) {
    _this.items[index] = value
  }

  size() -> i32 {
    return _this.length
  }
}
