module main

// for printf
native {
#include <stdio.h>
}

strlen(ptr data) -> u32 {
  u32 result = 0

  native {
    char* data_ptr = (char*) data;
    while (*data_ptr) {
      ++result;
      data_ptr++;
    }
  }

  return result
}

create_string_from_ptr(ptr data) -> str {
  u32 stringLen = strlen(data)
  str result = new str(stringLen + 1)

  native {
    char* dst = result->_caffc_data;
    char* src = data;

    while (*src) {
      *dst = *src;
      dst++;
      src++;
    }

    *dst = 0;
  }

  return result
}

